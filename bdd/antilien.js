const a3_0x422241=a3_0xd3fd;(function(_0x1c818e,_0xa95d8e){const _0x35cebc=a3_0xd3fd,_0x4d402c=_0x1c818e();while(!![]){try{const _0x59a5a9=-parseInt(_0x35cebc(0x12a))/0x1*(-parseInt(_0x35cebc(0x130))/0x2)+-parseInt(_0x35cebc(0x12e))/0x3+-parseInt(_0x35cebc(0x139))/0x4+-parseInt(_0x35cebc(0x131))/0x5+-parseInt(_0x35cebc(0x122))/0x6+parseInt(_0x35cebc(0x138))/0x7+parseInt(_0x35cebc(0x125))/0x8;if(_0x59a5a9===_0xa95d8e)break;else _0x4d402c['push'](_0x4d402c['shift']());}catch(_0x5e748f){_0x4d402c['push'](_0x4d402c['shift']());}}}(a3_0x45d2,0x827eb),require(a3_0x422241(0x133))[a3_0x422241(0x12d)]());const {Pool}=require('pg');let s=require(a3_0x422241(0x11e));function a3_0xd3fd(_0x2ff528,_0x499a2f){const _0x45d215=a3_0x45d2();return a3_0xd3fd=function(_0xd3fdb,_0x118500){_0xd3fdb=_0xd3fdb-0x11b;let _0x271a22=_0x45d215[_0xd3fdb];return _0x271a22;},a3_0xd3fd(_0x2ff528,_0x499a2f);}var dbUrl=s['DATABASE_URL']?s['DATABASE_URL']:a3_0x422241(0x135);const proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);async function createAntilienTable(){const _0x4e9850=a3_0x422241,_0x5ce6a7=await pool[_0x4e9850(0x136)]();try{await _0x5ce6a7[_0x4e9850(0x128)](_0x4e9850(0x11d)),console[_0x4e9850(0x137)](_0x4e9850(0x11b));}catch(_0x4b58b8){console[_0x4e9850(0x13b)](_0x4e9850(0x13c),_0x4b58b8);}finally{_0x5ce6a7[_0x4e9850(0x129)]();}}createAntilienTable();async function ajouterOuMettreAJourJid(_0x1fc5c0,_0x59c912){const _0x3e9239=a3_0x422241,_0x2af21a=await pool['connect']();try{const _0x32c617=await _0x2af21a[_0x3e9239(0x128)](_0x3e9239(0x127),[_0x1fc5c0]),_0x507309=_0x32c617['rows']['length']>0x0;_0x507309?await _0x2af21a['query'](_0x3e9239(0x13d),[_0x59c912,_0x1fc5c0]):await _0x2af21a[_0x3e9239(0x128)]('INSERT\x20INTO\x20antilien\x20(jid,\x20etat,\x20action)\x20VALUES\x20($1,\x20$2,\x20$3)',[_0x1fc5c0,_0x59c912,_0x3e9239(0x126)]),console[_0x3e9239(0x137)]('JID\x20'+_0x1fc5c0+'\x20ajouté\x20ou\x20mis\x20à\x20jour\x20avec\x20succès\x20dans\x20la\x20table\x20\x27antilien\x27.');}catch(_0x151366){console['error'](_0x3e9239(0x132),_0x151366);}finally{_0x2af21a['release']();}};async function mettreAJourAction(_0x147d34,_0x465736){const _0x448880=a3_0x422241,_0x5dd2d6=await pool['connect']();try{const _0x575092=await _0x5dd2d6[_0x448880(0x128)](_0x448880(0x127),[_0x147d34]),_0x2c750c=_0x575092[_0x448880(0x11c)]['length']>0x0;_0x2c750c?await _0x5dd2d6[_0x448880(0x128)]('UPDATE\x20antilien\x20SET\x20action\x20=\x20$1\x20WHERE\x20jid\x20=\x20$2',[_0x465736,_0x147d34]):await _0x5dd2d6[_0x448880(0x128)](_0x448880(0x12b),[_0x147d34,'non',_0x465736]),console[_0x448880(0x137)](_0x448880(0x13a)+_0x147d34+_0x448880(0x12c));}catch(_0x16309d){console[_0x448880(0x13b)]('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20l\x27action\x20pour\x20le\x20JID\x20dans\x20la\x20table\x20\x20:',_0x16309d);}finally{_0x5dd2d6[_0x448880(0x129)]();}};async function verifierEtatJid(_0x3e3ce7){const _0x1892c0=a3_0x422241,_0x568a0d=await pool['connect']();try{const _0x39f3d7=await _0x568a0d['query'](_0x1892c0(0x134),[_0x3e3ce7]);if(_0x39f3d7[_0x1892c0(0x11c)][_0x1892c0(0x121)]>0x0){const _0x23f3e2=_0x39f3d7['rows'][0x0]['etat'];return _0x23f3e2===_0x1892c0(0x12f);}else return![];}catch(_0x5b6175){return console[_0x1892c0(0x13b)](_0x1892c0(0x11f),_0x5b6175),![];}finally{_0x568a0d['release']();}};async function recupererActionJid(_0x484453){const _0x2c739f=a3_0x422241,_0x3327cb=await pool[_0x2c739f(0x136)]();try{const _0x58ab5a=await _0x3327cb[_0x2c739f(0x128)](_0x2c739f(0x123),[_0x484453]);if(_0x58ab5a[_0x2c739f(0x11c)][_0x2c739f(0x121)]>0x0){const _0x306f66=_0x58ab5a[_0x2c739f(0x11c)][0x0][_0x2c739f(0x120)];return _0x306f66;}else return _0x2c739f(0x126);}catch(_0x442d3c){return console[_0x2c739f(0x13b)](_0x2c739f(0x124),_0x442d3c),'supp';}finally{_0x3327cb[_0x2c739f(0x129)]();}};function a3_0x45d2(){const _0x21ca2a=['2961843SpbyOg','oui','6xsJOFw','3104050GuAbPG','Erreur\x20lors\x20de\x20l\x27ajout\x20ou\x20de\x20la\x20mise\x20à\x20jour\x20du\x20JID\x20dans\x20la\x20table\x20,','dotenv','SELECT\x20etat\x20FROM\x20antilien\x20WHERE\x20jid\x20=\x20$1','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','connect','log','3150679VZIFAg','2618812OvRbna','Action\x20mise\x20à\x20jour\x20avec\x20succès\x20pour\x20le\x20JID\x20','error','Une\x20erreur\x20est\x20survenue\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20\x27antilien\x27:','UPDATE\x20antilien\x20SET\x20etat\x20=\x20$1\x20WHERE\x20jid\x20=\x20$2','La\x20table\x20\x27antilien\x27\x20a\x20été\x20créée\x20avec\x20succès.','rows','\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20antilien\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20text\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20etat\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20action\x20text\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20','../set','Erreur\x20lors\x20de\x20la\x20vérification\x20de\x20l\x27état\x20du\x20JID\x20dans\x20la\x20table\x20','action','length','5886402CdqNWs','SELECT\x20action\x20FROM\x20antilien\x20WHERE\x20jid\x20=\x20$1','Erreur\x20lors\x20de\x20la\x20récupération\x20de\x20l\x27action\x20du\x20JID\x20dans\x20la\x20table\x20:','19700224EGDUgp','supp','SELECT\x20*\x20FROM\x20antilien\x20WHERE\x20jid\x20=\x20$1','query','release','288581NNriUq','INSERT\x20INTO\x20antilien\x20(jid,\x20etat,\x20action)\x20VALUES\x20($1,\x20$2,\x20$3)','\x20dans\x20la\x20table\x20\x27antilien\x27.','config'];a3_0x45d2=function(){return _0x21ca2a;};return a3_0x45d2();}module['exports']={'mettreAJourAction':mettreAJourAction,'ajouterOuMettreAJourJid':ajouterOuMettreAJourJid,'verifierEtatJid':verifierEtatJid,'recupererActionJid':recupererActionJid};

